<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title> index</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      /* Brand */
      --brand-blue:#044969;      /* primary navy */
      --brand-blue-90:#063ca8e6; /* 90% for sticky/solid variants (unused by default) */
      --brand-blue-08:#063ca814; /* 8% for subtle nav background */
      --brand-gold:#DAA520;

      /* UI */
      --bg:#F7F7FB; --card:#FFFFFF; --ink:#0F1222; --muted:#6B7280; --border:#E8E8EE;
      --shadow:0 10px 30px rgba(6,60,168,.10);
      --radius:16px; --radius-pill:999px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    a{color:var(--brand-blue);text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:24px}

    /* NAV: faint Raymoch-blue background for professional sequencing */
    header.nav{
      display:flex;align-items:center;justify-content:space-between;
      padding:12px 16px;
      background:var(--brand-blue-08);
      border-radius:12px;
      border:1px solid var(--border);
    }
    .brand{display:flex;gap:10px;align-items:center}
    .brand .dot{width:12px;height:12px;border-radius:50%;background:var(--brand-gold)}
    .brand h1{font-size:18px;margin:0;font-weight:700;color:var(--brand-blue)}
    .menu{display:flex;gap:18px;font-weight:600}
    .menu a{opacity:.9}
    .menu a:hover{opacity:1}

    /* HERO: solid navy, no white→blue gradient; soft bottom scrim for handoff */
    .hero{
      position:relative;
      background:var(--brand-blue);
      color:#fff;
      border-radius:var(--radius);
      padding:48px 40px 56px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .hero::after{
      content:"";
      position:absolute;left:0;right:0;bottom:-1px;height:80px;
      background:linear-gradient(180deg, rgba(6,60,168,0) 0%, rgba(247,247,251,1) 95%);
      pointer-events:none;
    }
    .hero h2{font-size:34px;margin:0 0 10px;font-weight:800;letter-spacing:.2px}
    .hero p{opacity:.95;margin:0;max-width:720px}

    /* Buttons / inputs */
    .btn{border:0;background:var(--brand-blue);color:#fff;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
    .btn.secondary{background:#fff;color:var(--brand-blue);border:1px solid var(--brand-blue)}
    .btn.ghost{background:transparent;color:var(--brand-blue);border:1px dashed var(--brand-blue)}
    .btn[disabled]{opacity:.5;cursor:not-allowed}
    .input, select{border:1px solid var(--border);background:#fff;border-radius:12px;padding:12px 14px;font-size:15px;min-width:180px}
    .row{display:flex;align-items:center;gap:12px;flex-wrap:wrap}

    /* Steps / cards */
    .step{margin-top:22px;background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
    .step header{padding:16px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
    .step header h3{margin:0;font-size:18px}
    .step .body{padding:18px}
    .actions{display:flex;justify-content:space-between;align-items:center;padding:16px 18px;border-top:1px solid var(--border)}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px}
    .col-7{grid-column:span 7}
    .col-5{grid-column:span 5}
    .col-12{grid-column:span 12}
    .card{border:1px solid var(--border);border-radius:20px;background:#fff;padding:16px 18px;box-shadow:var(--shadow)}
    .biz-head{display:flex;justify-content:space-between;gap:10px}
    .biz-title{font-weight:800}
    .muted{color:var(--muted)}
    .badge{display:inline-block;border-radius:10px;padding:4px 8px;background:#F2F4F8;border:1px solid #E2E6EE;font-size:12px;margin-right:6px}
    .badge.green{background:#E8F7EF;border-color:#D2F0DE;color:#1A7F45}
    .mini .biz-title{font-weight:700;font-size:15px}
    .mini.card{cursor:pointer}
    .why{color:#475569;font-size:14px;margin-top:8px}
    .hint{color:var(--muted);font-size:13px}
    .count{font-weight:700}
    .hidden{display:none}

    /* Footer */
    footer{margin-top:28px;border-top:1px solid var(--border);padding:18px 0;color:var(--muted);font-size:14px}
    footer .row{justify-content:space-between}
    footer nav a{margin-right:14px}
  </style>
</head>
<body>
  <div class="container">
    <!-- Top Nav -->
    <header class="nav">
      <div class="brand"><span class="dot"></span><h1>Raymoch</h1></div>
      <nav class="menu">
        <a href="#">Businesses</a>
        <a href="#">Insights</a>
        <a href="#">Services</a>
        <a href="#">About</a>
      </nav>
    </header>

    <!-- HERO (no controls; just story) -->
    <section class="hero">
      <h2>Match with the right African & diaspora SMEs — built on trust, not hype.</h2>
      <p>Share your focus. We return curated matches with clear reasons and a Cultural Trust signal. Matching, not ranking.</p>
    </section>

    <!-- STEP: Search & Refine (ALWAYS-ON preview) -->
    <section class="step" id="searchStep">
      <header>
        <h3>Search & Refine (Step 1–2 merged)</h3>
        <span class="hint"><span class="count" id="matchCountTop">0</span> businesses match your current filters</span>
      </header>
      <div class="body">
        <div class="grid">
          <!-- Filters -->
          <div class="col-7 card">
            <h4 style="margin:0 0 10px">Filters</h4>
            <div class="row">
              <input id="q2" class="input" placeholder="Search by name, city, keyword…" />
              <select id="country2" class="input">
                <option value="">All countries (54+)</option>
                <option>Ethiopia</option><option>Kenya</option><option>Uganda</option><option>Tanzania</option>
                <option>Rwanda</option><option>Nigeria</option><option>Ghana</option><option>South Africa</option>
                <option>Egypt</option><option>Morocco</option><option>Algeria</option><option>Senegal</option>
                <option>Somalia</option><option>Sudan</option><option>Zambia</option><option>Zimbabwe</option>
                <option>Namibia</option><option>Botswana</option><option>Cameroon</option><option>Côte d’Ivoire</option>
                <option>DR Congo</option><option>Mozambique</option><option>Madagascar</option><option>Tunisia</option>
              </select>
              <select id="sector2" class="input">
                <option value="">All sectors</option>
                <option>Agriculture & Food</option><option>FinTech</option><option>Energy & Renewables</option>
                <option>Manufacturing</option><option>Health</option><option>Education</option>
                <option>Logistics</option><option>Retail</option><option>Tourism</option><option>Construction</option>
              </select>
            </div>
            <div class="row" style="margin-top:10px">
              <input id="min2" class="input" type="number" placeholder="Min ticket ($)" />
              <input id="max2" class="input" type="number" placeholder="Max ticket ($)" />
              <select id="cti" class="input">
                <option value="">Any CTI depth</option>
                <option value="existence">Existence Only</option>
                <option value="verified">Verified</option>
                <option value="deep">Deep CTI</option>
              </select>
            </div>
            <div class="row" style="margin-top:10px">
              <label class="pill"><input type="checkbox" value="equity" class="instr" /> Equity</label>
              <label class="pill"><input type="checkbox" value="revenue share" class="instr" /> Revenue share</label>
              <label class="pill"><input type="checkbox" value="debt" class="instr" /> Debt</label>
              <label class="pill"><input type="checkbox" value="grant" class="instr" /> Grant</label>
            </div>
            <div class="row" style="margin-top:12px">
              <!-- Primary action -->
              <button class="btn" id="doMatch">Match</button>
              <span class="hint">Preview updates live. Click a preview card to open the profile.</span>
            </div>
          </div>

          <!-- Live Preview (ALWAYS visible & clickable) -->
          <div class="col-5">
            <div class="card">
              <div class="row" style="justify-content:space-between">
                <h4 style="margin:0">Preview</h4>
                <span class="hint">Top 3 shown • updates live</span>
              </div>
              <div id="miniPreview"></div>
              <div class="hint" style="margin-top:8px">You’ll see the full list on the next step.</div>
            </div>
          </div>
        </div>

        <div style="margin-top:16px" class="row">
          <button class="btn secondary" id="toMatches">Continue</button>
        </div>
      </div>
      <div class="actions">
        <span class="hint">Preview: <span class="count" id="matchCountBottom">0</span> potential matches.</span>
      </div>
    </section>

    <!-- STEP: Matches / Suggestions -->
    <section class="step hidden" id="matchStep">
      <header>
        <h3>Matched businesses</h3>
        <span class="hint" id="showingText">Showing 0 of 0</span>
      </header>
      <div class="body" id="results"></div>
      <div class="actions">
        <button class="btn secondary" id="backToSearch">Back</button>
        <span style="flex:1"></span>
        <button class="btn" id="continueCTA">Continue</button>
      </div>
    </section>

    <!-- STEP: Company Profile -->
    <section class="step hidden" id="profileStep">
      <header>
        <h3 id="profName">Company</h3>
        <span class="hint" id="profMeta"></span>
      </header>
      <div class="body" id="profBody"></div>
      <div class="actions">
        <button class="btn secondary" id="backFromProfile">Back</button>
        <span style="flex:1"></span>
        <button class="btn" id="contactCTA">Contact</button>
      </div>
    </section>

    <!-- FOOTER -->
    <footer>
      <div class="row">
        <div>© <span id="y"></span> Raymoch — Trust-driven matching for African & diaspora SMEs.</div>
        <nav>
          <a href="#">Privacy</a>
          <a href="#">Terms</a>
          <a href="#">Contact</a>
        </nav>
      </div>
    </footer>
  </div>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    // ---------- Data (stub) ----------
    const DATA = [
      {
        name:"Shashamane Agro Co.", country:"Ethiopia", sector:"Agriculture & Food",
        min:15000, max:80000, accepts:["revenue share","equity"], cti:"verified",
        freshnessDays:21, fit:"Great fit", why:["ticket aligned","instrument match","timing ok","preferred sector","ready soon"],
        about:"Regional agro-processing firm focused on grain and oilseeds. Strong local supply relationships.",
        needs:"Working capital + small-scale equipment upgrades.",
        links:{site:"#", deck:"#"}
      },
      { name:"LipaLink", country:"Kenya", sector:"FinTech",
        min:25000, max:120000, accepts:["equity","debt"], cti:"existence",
        freshnessDays:14, fit:"Good fit", why:["ticket aligned","sector focus"],
        about:"Payments aggregator for SMEs bridging mobile money and bank rails.",
        needs:"Seed extension.",
        links:{site:"#", deck:"#"}
      },
      { name:"SunBloom Energy", country:"Rwanda", sector:"Energy & Renewables",
        min:50000, max:200000, accepts:["equity","revenue share"], cti:"deep",
        freshnessDays:9, fit:"Great fit", why:["timing ok","impact aligned","CTI depth"],
        about:"C&I solar EPC with recurring O&M contracts.",
        needs:"Project finance for 1.2MW pipeline.",
        links:{site:"#", deck:"#"}
      },
      { name:"Medura Clinics", country:"Ghana", sector:"Health",
        min:10000, max:60000, accepts:["revenue share"], cti:"verified",
        freshnessDays:33, fit:"Possible match", why:["early pipeline"],
        about:"Primary care clinics expanding to peri-urban areas.",
        needs:"Equipment leasing + short-term WC.",
        links:{site:"#", deck:"#"}
      }
    ];

    // ---------- Helpers ----------
    const $ = s => document.querySelector(s);
    const inputs = ['#q2','#country2','#sector2','#min2','#max2','#cti','.instr'];
    inputs.forEach(sel=>{
      if(sel === '.instr'){
        document.querySelectorAll(sel).forEach(cb=>cb.addEventListener('change', updateAll));
      }else{
        const el = $(sel);
        if(el) el.addEventListener('input', updateAll);
        if(el && el.tagName==='SELECT') el.addEventListener('change', updateAll);
      }
    });

    function getFilters(){
      const kw = ($('#q2').value || '').trim().toLowerCase();
      const country = $('#country2').value;
      const sector = $('#sector2').value;
      const min = parseInt($('#min2').value || '0',10);
      const max = parseInt($('#max2').value || '999999999',10);
      const cti = $('#cti').value;
      const instr = [...document.querySelectorAll('.instr:checked')].map(x=>x.value);
      return {kw,country,sector,min,max,cti,instr};
    }
    function passes(d,f){
      if (f.kw){
        const hay = `${d.name} ${d.country} ${d.sector}`.toLowerCase();
        if (!hay.includes(f.kw)) return false;
      }
      if (f.country && d.country!==f.country) return false;
      if (f.sector && d.sector!==f.sector) return false;
      if (d.max < f.min) return false;
      if (d.min > f.max) return false;
      if (f.cti && d.cti!==f.cti) return false;
      if (f.instr.length && !f.instr.some(x=>d.accepts.includes(x))) return false;
      return true;
    }
    function currentMatches(){ const f=getFilters(); return DATA.filter(d=>passes(d,f)); }
    function money(n){ return '$' + n.toLocaleString(); }

    // Live counts + mini preview (clickable)
    function updateAll(){
      const list = currentMatches();
      $('#matchCountTop').textContent = list.length;
      $('#matchCountBottom').textContent = list.length;

      const mini = $('#miniPreview');
      mini.innerHTML = '';
      if(!list.length){
        mini.innerHTML = `<div class="hint">No matches yet. Try broadening filters.</div>`;
      }else{
        list.slice(0,3).forEach(d=>{
          const div = document.createElement('div');
          div.className = 'card mini';
          div.style.marginTop = '10px';
          div.setAttribute('data-name', d.name);
          div.innerHTML = `
            <div class="biz-head">
              <div>
                <div class="biz-title">${d.name}</div>
                <div class="muted">${d.country} · ${d.sector}</div>
                <div style="margin-top:6px">
                  <span class="badge">${d.cti==='existence'?'Existence Only':d.cti==='verified'?'Verified':'Deep CTI'}</span>
                  <span class="badge green">${d.fit}</span>
                </div>
              </div>
              <div style="text-align:right;min-width:160px">
                <div class="muted">Ticket</div>
                <div style="font-weight:800">${money(d.min)} – ${money(d.max)}</div>
              </div>
            </div>
          `;
          div.addEventListener('click', ()=> openProfile(d));
          mini.appendChild(div);
        });
      }
    }

    // Full results
    function renderResults(){
      const list = currentMatches();
      const root = $('#results');
      root.innerHTML = '';
      if (!list.length){
        root.innerHTML = `<div class="card"><strong>No matches (yet).</strong><div class="hint">Broaden ticket band, remove a constraint, or switch CTI depth.</div></div>`;
      } else {
        list.forEach((d)=>{
          const card = document.createElement('div');
          card.className = 'card';
          card.style.cursor = 'pointer';
          card.addEventListener('click', ()=> openProfile(d));
          card.innerHTML = `
            <div class="biz-head">
              <div>
                <div class="biz-title">${d.name}</div>
                <div class="muted">${d.country} · ${d.sector}</div>
                <div style="margin-top:8px">
                  <span class="badge">${d.cti==='existence'?'Existence Only':d.cti==='verified'?'Verified':'Deep CTI'}</span>
                  <span class="badge">Verified ${d.freshnessDays}d ago</span>
                  <span class="badge green">${d.fit}</span>
                </div>
                <div class="why">Why: ${d.why.join(' · ')}</div>
              </div>
              <div style="text-align:right;min-width:220px">
                <div class="muted">Ticket band</div>
                <div style="font-weight:800">${money(d.min)} – ${money(d.max)}</div>
                <div class="muted" style="margin-top:8px">Accepts</div>
                <div>${d.accepts.join(', ')}</div>
              </div>
            </div>
          `;
          root.appendChild(card);
        });
      }
      $('#showingText').textContent = `Showing ${list.length} of ${list.length}`;
    }

    // Profile view
    function openProfile(d){
      $('#profName').textContent = d.name;
      $('#profMeta').textContent = `${d.country} · ${d.sector} • ${d.cti==='existence'?'Existence Only':d.cti==='verified'?'Verified':'Deep CTI'}`;
      $('#profBody').innerHTML = `
        <div class="grid">
          <div class="col-12 card">
            <div class="biz-head">
              <div>
                <div class="muted">Ticket band</div>
                <div style="font-weight:800">${money(d.min)} – ${money(d.max)}</div>
                <div class="muted" style="margin-top:8px">Accepts</div>
                <div>${d.accepts.join(', ')}</div>
              </div>
              <div style="text-align:right;min-width:220px">
                <div class="badge green">${d.fit}</div>
                <div class="badge">Verified ${d.freshnessDays}d ago</div>
              </div>
            </div>
          </div>
          <div class="col-12 card">
            <h4 style="margin:0 0 6px">About</h4>
            <p>${d.about}</p>
            <h4 style="margin:12px 0 6px">Current need</h4>
            <p>${d.needs}</p>
            <div style="margin-top:10px">
              <a class="badge" href="${d.links.site}">Website</a>
              <a class="badge" href="${d.links.deck}">Deck</a>
            </div>
          </div>
        </div>
      `;

      // Show profile step
      $('#searchStep').classList.add('hidden');
      $('#matchStep').classList.add('hidden');
      $('#profileStep').classList.remove('hidden');
      $('#profileStep').scrollIntoView({behavior:'smooth'});
    }

    // Nav / actions
    $('#toMatches').addEventListener('click', ()=>{
      renderResults();
      $('#searchStep').classList.add('hidden');
      $('#matchStep').classList.remove('hidden');
      $('#matchStep').scrollIntoView({behavior:'smooth'});
    });
    $('#backToSearch').addEventListener('click', ()=>{
      $('#matchStep').classList.add('hidden');
      $('#searchStep').classList.remove('hidden');
      $('#searchStep').scrollIntoView({behavior:'smooth'});
    });
    $('#backFromProfile').addEventListener('click', ()=>{
      // Prefer returning to Matches; if that’s hidden, go to Search
      $('#profileStep').classList.add('hidden');
      if (!$('#matchStep').classList.contains('hidden')){
        $('#matchStep').scrollIntoView({behavior:'smooth'});
      } else {
        $('#searchStep').classList.remove('hidden');
        $('#searchStep').scrollIntoView({behavior:'smooth'});
      }
      $('#matchStep').classList.remove('hidden');
    });

    // Primary "Match" button = go straight to Matches
    $('#doMatch').addEventListener('click', ()=>{
      renderResults();
      $('#searchStep').classList.add('hidden');
      $('#matchStep').classList.remove('hidden');
      $('#matchStep').scrollIntoView({behavior:'smooth'});
    });

    $('#continueCTA').addEventListener('click', ()=> alert('Next: view details / contact / save (stub)'));

    // init
    updateAll();
  </script>
</body>
</html>
