<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Raymoch • Market Insights</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
:root{
  --brand-blue:#0A2A6B; --brand-gold:#DAA520; --bg:#f7f8fb; --card:#fff;
  --ink:#101114; --muted:#6b7280; --border:#e5e7eb; --shadow:0 10px 30px rgba(10,42,107,.08);
  --radius:16px; --pill:999px;

  /* Header palette (site-standard) */
  --nav-brand:#0328aeed; --nav-link:#0f172a; --nav-hover:#0a2a6b;
  --nav-bg:#ffffff; --nav-fg:#101114; --border-soft:#e8e8ee;
}

*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.5 'Segoe UI',system-ui,-apple-system,Roboto,Arial}
img{max-width:100%;display:block}
a{color:inherit;text-decoration:none}
.container{max-width:1100px;margin:0 auto;padding:32px 20px}
.wrap{max-width:1328px;margin:0 auto;padding:0 18px}

/* ====== SITE HEADER (replaces old <nav>) ====== */
.header{
  background:var(--nav-bg); color:var(--nav-fg);
  position:sticky; top:0; z-index:1000; border-bottom:1px solid var(--border-soft)
}
.row1{
  display:flex;justify-content:space-between;align-items:center;gap:16px;
  padding:12px 8px; margin:15px; box-shadow:0 1px 0 rgba(0,0,0,.05); position:relative;
}
.brandrow{display:flex;align-items:center;gap:22px}
.brand{display:flex;align-items:center;gap:10px;color:var(--nav-brand)}
.brand-word{font-weight:900;font-size:1.4rem;color:var(--nav-brand);letter-spacing:.2px}
.dotgrid{width:18px;height:18px;display:inline-grid;grid-template-columns:repeat(2,1fr);gap:2px}
.dotgrid i{width:5px;height:5px;border-radius:2px;background:#101114}

.rightside{display:flex;align-items:center;gap:14px}
.search-box{min-width:140px;width:18vw;max-width:260px}
.search-box input{width:100%;height:40px;padding:0 14px;border:1px solid var(--border-soft);border-radius:var(--pill)}
.search-box input:focus{border-color:var(--nav-brand);outline:2px solid #cfe0ff}
.header .btn{height:40px;display:inline-flex;align-items:center;gap:8px;padding:0 16px;border-radius:var(--pill);font-weight:700;background:#fff;border:1px solid var(--border-soft);cursor:pointer}
.header .btn.primary{background:var(--nav-brand);color:#fff;border-color:var(--nav-brand)}

.explore-toggle{
  appearance:none;border:0;background:transparent;cursor:pointer;
  display:flex;align-items:center;gap:8px;font-weight:800;color:var(--nav-link);
  padding:6px 8px;border-radius:8px;font-size:1.1rem;
}
.explore-toggle:hover,
.explore-toggle[aria-expanded="true"]{ background:#eceff3;color:var(--nav-hover); }

.menu-panel{
  position:absolute; top:calc(100% + 10px); left:15px; z-index:1100;
  width:min(760px, calc(100vw - 40px));
  background:#fff;border:1px solid var(--border-soft);border-radius:14px;box-shadow:0 6px 22px rgba(10,42,107,.08);
  padding:14px;
}
.menu-panel[hidden]{ display:none; }
.menu-grid{display:grid;grid-template-columns:repeat(2,minmax(240px,1fr));gap:12px}
.menu-item{display:block;padding:12px;border:1px solid var(--border-soft);border-radius:12px;background:#fff}
.menu-item:hover{transform:translateY(-1px);box-shadow:0 8px 20px rgba(0,0,0,.06)}
.menu-item h5{margin:0 0 6px;font-size:.98rem}
.menu-item p{margin:0;color:#3c4b69;font-size:.92rem}

.row2{background:#f5f6f8;border-top:1px solid #eee;border-bottom:1px solid #e6e6e6;padding-left:15px}
.row2 .wrap{max-width:none;padding:0}
.row2 .links{display:flex;gap:18px;padding:8px 8px;margin:0;justify-content:flex-start;align-items:center}
.row2 a{font-weight:600;font-size:.92rem;padding:4px 6px;border-radius:4px;color:var(--nav-link)}
.row2 a:hover{background:#eceff3;color:var(--nav-hover)}
.row2 a.active{background:#e7ecff;color:var(--nav-brand)}

/* ====== YOUR ORIGINAL STYLES (unchanged) ====== */
.hero{padding:36px 0 8px}
.hero h1{font-size:40px;color:var(--brand-blue);margin:0 0 6px}
.hero p{color:var(--muted);margin:0}
.pulse{display:flex;align-items:center;gap:12px;margin:18px 0 26px;padding:12px 16px;background:#fff;border:1px solid var(--border);border-radius:var(--pill);box-shadow:var(--shadow)}
.pulse .dot{width:10px;height:10px;border-radius:50%;background:var(--brand-gold);animation:pulse 2s infinite}
@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(218,165,32,.35)}70%{box-shadow:0 0 0 12px rgba(218,165,32,0)}100%{box-shadow:0 0 0 0 rgba(218,165,32,0)}}
.badge{background:var(--brand-gold);color:#fff;font-size:12px;padding:2px 8px;border-radius:var(--pill);font-weight:600}
.searchbar{display:flex;align-items:center;gap:12px;padding:12px 14px;background:#fff;border:1px solid var(--border);border-radius:var(--pill);box-shadow:var(--shadow)}
.searchbar input{flex:1;border:0;outline:0;font-size:15px;background:transparent}
.toggle{display:flex;align-items:center;gap:8px;margin-left:auto}

.grid{display:grid;grid-template-columns:repeat(6,1fr);gap:18px;margin:24px 0 8px}
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px;cursor:pointer;transition:transform .12s ease}
.card:hover{transform:translateY(-2px)}
.card h3{font-size:18px;margin:0 0 6px;color:var(--brand-blue)}
.card p{color:var(--muted);margin:0}

.section{margin:26px 0}
.section h2{font-size:22px;color:var(--brand-blue);margin:0 0 10px}
.kv{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:10px 0}
.kv .kvp{background:#fff;border:1px solid var(--border);border-radius:12px;padding:12px}
.kv .k{display:block;color:var(--muted);font-size:12px}
.kv .v{display:block;font-weight:700}
.list{margin:10px 0}
.item{display:flex;justify-content:space-between;align-items:center;background:#fff;border:1px solid var(--border);border-radius:12px;padding:14px 16px;margin-top:10px}
.item .meta{color:var(--muted);font-size:13px}
.btn{padding:8px 14px;border-radius:var(--pill);background:var(--brand-blue);color:#fff}
.tags{display:flex;gap:8px;flex-wrap:wrap}
.tag{font-size:12px;padding:3px 8px;border:1px solid var(--border);border-radius:var(--pill);color:#374151;background:#fff}
.note{color:var(--muted);font-size:13px}
.table{width:100%;border-collapse:separate;border-spacing:0 8px}
.table th{font-size:12px;color:#6b7280;text-align:left;padding:0 10px}
.table td{background:#fff;border:1px solid var(--border);padding:12px 10px}
.table td:first-child{border-top-left-radius:12px;border-bottom-left-radius:12px}
.table td:last-child{border-top-right-radius:12px;border-bottom-right-radius:12px}

/* ====== SITE FOOTER (dark, standard) ====== */
.footer{background:#0b1020;color:#cbd5e1;}
/* Responsive */
@media(max-width:1100px){.grid{grid-template-columns:repeat(3,1fr)}}
@media(max-width:740px){.grid{grid-template-columns:repeat(2,1fr)}.kv{grid-template-columns:1fr}}
@media(max-width:480px){.grid{grid-template-columns:1fr}}
</style>
</head>
<body>

<!-- ===== HEADER (site-standard) ===== -->
<header class="header" id="site-header">
  <!-- Tier 1 -->
  <div class="row1">
    <div class="brandrow">
      <a class="brand" href="Entire.html" aria-label="Raymoch home">
        <svg width="28" height="28" viewBox="0 0 200 200" aria-hidden="true">
          <polygon fill="none" stroke="currentColor" stroke-width="10" points="100,18 172,59 172,141 100,182 28,141 28,59"/>
          <text x="100" y="118" text-anchor="middle" style="fill:currentColor;font:700 105px Georgia">R</text>
        </svg>
        <span class="brand-word">Raymoch</span>
      </a>

      <button class="explore-toggle" id="exploreToggle" aria-haspopup="true" aria-expanded="false">
        <span class="dotgrid" aria-hidden="true"><i></i><i></i><i></i><i></i></span>
        Explore
      </button>

      <div class="menu-panel" id="t1Menu" role="menu" aria-labelledby="exploreToggle" hidden>
        <div class="menu-grid">
          <a class="menu-item" href="explore2.html">
            <h5>Explore Businesses</h5>
            <p>Browse verified companies by sector and country.</p>
          </a>
          <a class="menu-item" href="Matching.html">
            <h5>Trusted Matching</h5>
            <p>Get paired with credible businesses using CTI & verification.</p>
          </a>
          <a class="menu-item" href="verification.html">
            <h5>Verification</h5>
            <p>CTI badges, document checks, and data provenance.</p>
          </a>
          <a class="menu-item" href="Market_Insight.html">
            <h5>Research & Insights</h5>
            <p>Sector reports, trends, and regional briefs.</p>
          </a>
          <a class="menu-item" href="Services.html">
            <h5>Programs & Services</h5>
            <p>Advisory, partner programs, and support options.</p>
          </a>
          <a class="menu-item" href="About.html">
            <h5>Who We Are</h5>
            <p>Mission, team, and what we stand for.</p>
          </a>
        </div>
      </div>
    </div>     

    <div class="rightside">
      <form class="search-box" action="search.html">
        <input id="navSearch" type="search" name="q" placeholder="Search companies, sectors, regions…" />
      </form>
      <div class="auth">
        <button class="btn" id="loginBtn" type="button">Log in</button>
        <button class="btn primary" id="signupBtn" type="button">Sign up</button>
      </div>
    </div>
  </div>

  <!-- Tier 2 -->
  <div class="row2">
    <div class="wrap">
      <nav class="links" aria-label="Secondary">
        <a href="explore2.html">Businesses</a>
        <a href="Services.html">Services</a>
        <a href="Market_Insight.html" class="active">Research &amp; Insights</a>
        <a href="About.html">Who We Are</a>
      </nav>
    </div>
  </div>
</header>

<main class="container">
  <!-- === YOUR ORIGINAL CONTENT (unchanged) === -->
  <section class="hero">
    <h1>Market Insights</h1>
    <p>Country snapshots, sector briefs, and real-world signals — minus the noise.</p>
    <div class="pulse" aria-live="polite">
      <span class="dot" aria-hidden="true"></span>
      <span class="badge" id="pulse-badge">Latest</span>
      <strong id="pulse-headline">Loading…</strong>
      <span id="pulse-sub" class="note">As of —</span>
    </div>
    <div class="searchbar">
      <input id="q" placeholder="Search insights, reports, countries, or sectors…" />
      <div class="toggle">
        <input type="checkbox" id="verOnly">
        <label for="verOnly">Raymoch-verified only</label>
      </div>
      <a class="btn" href="#" id="searchBtn">Search</a>
    </div>
  </section>

  <div class="subnav" style="margin:14px 0 8px; display:flex; flex-wrap:wrap; gap:8px;">
    <a class="tag" data-route href="#/countries">Countries</a>
    <a class="tag" data-route href="#/sectors">Sectors</a>
    <a class="tag" data-route href="#/themes">Themes</a>
    <a class="tag" data-route href="#/reports">Reports</a>
    <a class="tag" data-route href="#/news">News & Deals</a>
    <a class="tag" data-route href="#/data">Data Explorer</a>
  </div>

  <section id="view-home">
    <div class="grid" id="grid">
      <a class="card" data-route href="#/countries"><h3>Countries</h3><p>Macro, FDI, SME climate, policy notes.</p></a>
      <a class="card" data-route href="#/sectors"><h3>Sectors</h3><p>Trends, unit economics, risk flags.</p></a>
      <a class="card" data-route href="#/themes"><h3>Themes</h3><p>Cross-cutting plays: diaspora capital, logistics…</p></a>
      <a class="card" data-route href="#/reports"><h3>Reports</h3><p>Investor notes & downloadable snapshots.</p></a>
      <a class="card" data-route href="#/news"><h3>News & Deals</h3><p>Raises, exits, and policy moves that matter.</p></a>
      <a class="card" data-route href="#/data"><h3>Data Explorer</h3><p>Time series & comparables.</p></a>
    </div>
  </section>

  <section id="view-countries" class="section" hidden></section>
  <section id="view-sectors" class="section" hidden></section>
  <section id="view-themes" class="section" hidden></section>
  <section id="view-reports" class="section" hidden></section>
  <section id="view-news" class="section" hidden></section>
  <section id="view-data" class="section" hidden></section>
</main>

<!-- ===== FOOTER (site-standard, dark) ===== -->
<footer class="footer" id="site-footer">
  <div class="wrap" style="padding:32px 18px">
    <div style="display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:18px">
      <div>
        <div style="color:#fff;font-weight:800;font-size:1.2rem;margin-bottom:8px">Raymoch</div>
        <div style="color:#94a3b8;max-width:360px">
          Connecting investors and entrepreneurs through trust, verified data, and actionable insights.
        </div>
      </div>
      <div>
        <h5 style="margin-bottom:10px;color:#e5e7eb;font-size:.95rem">Company</h5>
        <a href="About.html" style="display:block;color:#cbd5e1;margin:6px 0">About</a>
        <a href="careers.html" style="display:block;color:#cbd5e1;margin:6px 0">Careers</a>
        <a href="press.html" style="display:block;color:#cbd5e1;margin:6px 0">Press</a>
        <a href="contact.html" style="display:block;color:#cbd5e1;margin:6px 0">Contact</a>
      </div>
      <div>
        <h5 style="margin-bottom:10px;color:#e5e7eb;font-size:.95rem">Product</h5>
        <a href="explore2.html" style="display:block;color:#cbd5e1;margin:6px 0">Explore Businesses</a>
        <a href="Market_Insight.html" style="display:block;color:#cbd5e1;margin:6px 0">Market Insights</a>
        <a href="verification.html" style="display:block;color:#cbd5e1;margin:6px 0">Verification</a>
        <a href="Services.html" style="display:block;color:#cbd5e1;margin:6px 0">Programs & Services</a>
      </div>
      <div>
        <h5 style="margin-bottom:10px;color:#e5e7eb;font-size:.95rem">Resources</h5>
        <a href="blog.html" style="display:block;color:#cbd5e1;margin:6px 0">Blog</a>
        <a href="help.html" style="display:block;color:#cbd5e1;margin:6px 0">Help Center</a>
        <a href="security.html" style="display:block;color:#cbd5e1;margin:6px 0">Security</a>
        <a href="status.html" style="display:block;color:#cbd5e1;margin:6px 0">Status</a>
      </div>
    </div>
    <div style="border-top:1px solid #1f2937;margin-top:22px;padding:12px 0;display:flex;justify-content:space-between;align-items:center;font-size:.92rem">
      <div>© <span id="footerYear"></span> Raymoch. All rights reserved.</div>
      <div>
        <a href="privacy.html" style="color:#cbd5e1;margin-left:14px">Privacy</a>
        <a href="terms.html" style="color:#cbd5e1;margin-left:14px">Terms</a>
        <a href="cookies.html" style="color:#cbd5e1;margin-left:14px">Cookies</a>
      </div>
    </div>
  </div>
</footer>

<script>
/* ===== Header behaviors (dropdown + active link) ===== */
(function(){
  const btn = document.getElementById('exploreToggle');
  const menu = document.getElementById('t1Menu');
  if(btn && menu){
    const toggle = (open)=>{ btn.setAttribute('aria-expanded', open?'true':'false'); menu.hidden = !open; };
    btn.addEventListener('click', e=>{ e.preventDefault(); toggle(menu.hidden); });
    document.addEventListener('click', e=>{ if(!menu.hidden && !menu.contains(e.target) && !btn.contains(e.target)) toggle(false); });
    document.addEventListener('keydown', e=>{ if(e.key==='Escape') toggle(false); });
  }
  // highlight current page in Tier-2
  const current = 'Market_Insight.html';
  document.querySelectorAll('#site-header .row2 a[href]').forEach(a=>{
    const href=a.getAttribute('href'); if(href && href===current) a.classList.add('active');
  });
})();

// Footer year
(function(){ const y=document.getElementById('footerYear'); if(y) y.textContent = new Date().getFullYear(); })();

// Auth stubs
(function(){
  const loginBtn = document.getElementById('loginBtn');
  const signupBtn = document.getElementById('signupBtn');
  if(loginBtn) loginBtn.addEventListener('click', ()=> alert('Log in flow (stub)'));
  if(signupBtn) signupBtn.addEventListener('click', ()=> alert('Sign up flow (stub)'));
})();

/* ===== YOUR ORIGINAL APP CODE (unchanged) ===== */
// ==== STATIC MOCK DATA (single-file). Move to MySQL/API later. ====
const DATA = {
  pulse: [
    {headline: "SME credit up 8.4% YoY in Kenya", sub: "As of Sep 15, 2025 — Raymoch blend v0.1", ts: "2025-09-15"},
    {headline: "Nigeria FDI inflows $2.3B in Q2", sub: "As of Jun 30, 2025 — est.", ts: "2025-06-30"},
    {headline: "Ethiopia adds +15% RE capacity YoY", sub: "As of Sep 10, 2025 — energy desk", ts: "2025-09-10"}
  ],
  countries: [
    { slug: "kenya", name: "Kenya", last_updated: "2025-09-20",
      macro: { gdp_growth_yoy: 5.1, inflation_yoy: 6.3, fdi_ytd_usd_b: 1.8 },
      sme_climate: { credit_pulse_yoy: 8.4, policy_note: "New MSME collateral law (Sept 2025)" }
    },
    { slug: "ghana", name: "Ghana", last_updated: "2025-09-12",
      macro: { gdp_growth_yoy: 3.9, inflation_yoy: 8.7, fdi_ytd_usd_b: 1.1 },
      sme_climate: { credit_pulse_yoy: 4.2, policy_note: "FX stabilisation window for SMEs" }
    },
    { slug: "ethiopia", name: "Ethiopia", last_updated: "2025-09-18",
      macro: { gdp_growth_yoy: 6.5, inflation_yoy: 7.4, fdi_ytd_usd_b: 2.0 },
      sme_climate: { credit_pulse_yoy: 5.0, policy_note: "Export processing zones expansion" }
    }
  ],
  sectors: [
    { slug: "fintech", name: "FinTech", last_updated: "2025-09-18",
      unit_economics: { cac: 14.5, ltv: 96.0, payback_months: 7 },
      trends: ["cross-border wallets","agent banking 2.0"],
      risk_flags: ["licensing", "mobile-money concentration"]
    },
    { slug: "agri", name: "Agriculture & Food", last_updated: "2025-09-14",
      unit_economics: { cac: 22.0, ltv: 72.0, payback_months: 10 },
      trends: ["cold-chain buildout","farm-to-fintech credit"],
      risk_flags: ["weather","price volatility"]
    },
    { slug: "energy", name: "Energy & Renewables", last_updated: "2025-09-16",
      unit_economics: { cac: 40.0, ltv: 240.0, payback_months: 18 },
      trends: ["micro-grids","battery leasing"],
      risk_flags: ["capex","policy cycles"]
    }
  ],
  themes: [
    { slug: "diaspora-capital", name: "Diaspora Capital", summary: "Remittance→equity bridges via SPVs & matching.", signals:["bank–fintech corridors","FX micro-hedges"], last_updated: "2025-09-22" },
    { slug: "logistics-bottlenecks", name: "Logistics Bottlenecks", summary: "Ports, first-mile, cold-chain gaps.", signals:["bonded warehouses","port automation"], last_updated: "2025-09-10" },
    { slug: "energy-transition", name: "Energy Transition", summary: "Distributed RE, PAYGO, storage.", signals:["micro-grids","EV two-wheelers"], last_updated: "2025-09-11" }
  ],
  reports: [
    { id: "kenya-sme-credit-pulse-q3", title: "Kenya SME Credit Pulse — Q3", type: "Investor Note", pages: 9, download_url: "#", tags:["Kenya","Credit","SME"], last_updated:"2025-09-19" },
    { id: "nigeria-fintech-brief-q2", title: "Nigeria FinTech Brief — Q2", type: "Sector Note", pages: 7, download_url: "#", tags:["Nigeria","FinTech"], last_updated:"2025-07-05" },
    { id: "ethiopia-energy-outlook-2025", title: "Ethiopia Energy Outlook — 2025", type: "Outlook", pages: 11, download_url: "#", tags:["Ethiopia","Energy"], last_updated:"2025-09-10" }
  ],
  news: [
    { headline:"Nairobi fintech raises $18M Series A", source:"TechAfrica", date:"2025-09-23", countries:["Kenya"], sectors:["FinTech"], link:"#" },
    { headline:"Ethiopian agritech secures $5M logistics round", source:"AgriNews", date:"2025-09-21", countries:["Ethiopia"], sectors:["Agriculture"], link:"#" },
    { headline:"Ugandan startup pilots micro-grids in refugee settlements", source:"Energy Today", date:"2025-09-18", countries:["Uganda"], sectors:["Energy"], link:"#" }
  ],
  indicators: [
    { metric:"sme_credit_growth_yoy", label:"SME Credit YoY", geo:"Kenya", value:8.4, unit:"%", as_of:"2025-09-15" },
    { metric:"fdi_inflows_q", label:"FDI inflows (quarter)", geo:"Nigeria", value:2.3, unit:"$B", as_of:"2025-06-30" },
    { metric:"re_capacity_yoy", label:"Renewable capacity YoY", geo:"Ethiopia", value:15, unit:"%", as_of:"2025-09-10" }
  ]
};

// ==== HELPERS ====
const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));
function kvHTML(k, v){ return `<div class="kvp"><span class="k">${k}</span><span class="v">${v}</span></div>`; }

// ==== RENDERERS ====
function renderPulse(){
  const p = DATA.pulse[0];
  $('#pulse-headline').textContent = p.headline;
  $('#pulse-sub').textContent = p.sub;
  $('#pulse-badge').textContent = 'Latest';
}

function renderCountries(){
  const mount = $('#view-countries');
  let html = `<h2>Countries <span class="note">(Regional Briefs)</span></h2>`;
  DATA.countries.forEach(c => {
    html += `<div class="item">
      <div>
        <strong>${c.name}</strong>
        <div class="meta">Last updated: ${c.last_updated}</div>
        <div class="kv">
          ${kvHTML('GDP growth (YoY)', c.macro.gdp_growth_yoy + '%')}
          ${kvHTML('Inflation (YoY)', c.macro.inflation_yoy + '%')}
          ${kvHTML('FDI inflows (YTD)', '$' + c.macro.fdi_ytd_usd_b + 'B')}
          ${kvHTML('SME credit (YoY)', '+' + c.sme_climate.credit_pulse_yoy + '%')}
          ${kvHTML('Policy note', c.sme_climate.policy_note)}
        </div>
      </div>
      <a class="btn" href="#">Open brief</a>
    </div>`
  });
  mount.innerHTML = html;
}

function renderSectors(){
  const mount = $('#view-sectors');
  let html = `<h2>Sectors <span class="note">(Sector Reports)</span></h2>
  <table class="table"><thead><tr>
  <th>Sector</th><th>Trends</th><th>Unit economics</th><th>Risks</th><th>Updated</th>
  </tr></thead><tbody>`;
  DATA.sectors.forEach(s => {
    const ue = `CAC $${s.unit_economics.cac} • LTV $${s.unit_economics.ltv} • Payback ${s.unit_economics.payback_months}m`;
    html += `<tr>
      <td>${s.name}</td>
      <td>${s.trends.join(', ')}</td>
      <td>${ue}</td>
      <td>${s.risk_flags.join(', ')}</td>
      <td>${s.last_updated}</td>
    </tr>`
  });
  html += `</tbody></table>`;
  mount.innerHTML = html;
}

function renderThemes(){
  const mount = $('#view-themes');
  let html = `<h2>Themes</h2>`;
  DATA.themes.forEach(t => {
    html += `<div class="item">
      <div>
        <strong>${t.name}</strong>
        <div class="meta">Last updated: ${t.last_updated}</div>
        <div class="note">${t.summary}</div>
        <div class="tags" style="margin-top:8px;">${t.signals.map(s=>`<span class='tag'>${s}</span>`).join('')}</div>
      </div>
      <a class="btn" href="#">Open theme</a>
    </div>`
  });
  mount.innerHTML = html;
}

function renderReports(){
  const mount = $('#view-reports');
  let html = `<h2>Reports</h2>`;
  DATA.reports.forEach(r => {
    html += `<div class="item">
      <div>
        <strong>${r.title}</strong>
        <div class="meta">${r.type} • ${r.pages} pages • Updated: ${r.last_updated}</div>
        <div class="tags" style="margin-top:8px;">${r.tags.map(t=>`<span class='tag'>${t}</span>`).join('')}</div>
      </div>
      <a class="btn" href="${r.download_url}">Download</a>
    </div>`
  });
  mount.innerHTML = html;
}

function renderNews(){
  const mount = $('#view-news');
  let html = `<h2>News & Deals <span class="note">(curated)</span></h2>`;
  DATA.news.forEach(n => {
    html += `<div class="item">
      <div>
        <strong>${n.headline}</strong>
        <div class="meta">${n.source} • ${n.date}</div>
        <div class="tags" style="margin-top:8px;">${n.countries.map(c=>`<span class='tag'>${c}</span>`).join('')} ${n.sectors.map(s=>`<span class='tag'>${s}</span>`).join('')}</div>
      </div>
      <a class="btn" href="${n.link}">Read</a>
    </div>`
  });
  mount.innerHTML = html;
}

function renderDataExplorer(){
  const mount = $('#view-data');
  let html = `<h2>Data Explorer <span class="note">(Benchmarks & Indicators)</span></h2>
  <table class="table"><thead><tr>
    <th>Metric</th><th>Geo</th><th>Value</th><th>As of</th>
  </tr></thead><tbody>`;
  DATA.indicators.forEach(m => {
    html += `<tr>
      <td>${m.label}</td>
      <td>${m.geo}</td>
      <td><strong>${m.value}</strong> ${m.unit}</td>
      <td>${m.as_of}</td>
    </tr>`
  });
  html += `</tbody></table>`;
  mount.innerHTML = html;
}

// ==== SEARCH (client-side) ====
function wireSearch(){
  document.getElementById('searchBtn').addEventListener('click', (e)=>{
    e.preventDefault();
    const q = (document.getElementById('q').value||'').toLowerCase().trim();
    if(!q) return;
    const ids=['view-countries','view-sectors','view-themes','view-reports','view-news','view-data'];
    for(const id of ids){
      const el = document.getElementById(id);
      if(el && el.textContent.toLowerCase().includes(q)){
        location.hash = '#/' + id.replace('view-','');
        break;
      }
    }
  });
}

// ==== ROUTER ====
function showView(id){
  const ids=['view-home','view-countries','view-sectors','view-themes','view-reports','view-news','view-data'];
  ids.forEach(v=>{ const el=document.getElementById(v); if(el){ el.hidden = (v!==id); }});
  window.scrollTo({top:0,behavior:'instant'});
}
function setActiveNav(){
  // Tier-2 already highlights via filename; keep hash-only highlighting internal to this page.
}
function renderRoute(){
  const hash = (location.hash||'#/home').toLowerCase();
  if(hash.startsWith('#/countries')){ renderCountries(); showView('view-countries'); }
  else if(hash.startsWith('#/sectors')){ renderSectors(); showView('view-sectors'); }
  else if(hash.startsWith('#/themes')){ renderThemes(); showView('view-themes'); }
  else if(hash.startsWith('#/reports')){ renderReports(); showView('view-reports'); }
  else if(hash.startsWith('#/news')){ renderNews(); showView('view-news'); }
  else if(hash.startsWith('#/data')){ renderDataExplorer(); showView('view-data'); }
  else { showView('view-home'); }
  setActiveNav();
}

function init(){
  renderPulse();
  wireSearch();
  // Delegate clicks for any element with data-route
  document.addEventListener('click', (e)=>{
    const a = e.target.closest('a[data-route]');
    if(a && a.getAttribute('href')){
      e.preventDefault();
      const href = a.getAttribute('href');
      if(location.hash !== href){ location.hash = href; } else { renderRoute(); }
    }
  });
  renderRoute();
  window.addEventListener('hashchange', renderRoute);
}

document.addEventListener('DOMContentLoaded', ()=>{
  if(!location.hash) location.hash = '#/home';
  init();
});
</script>
</body>
</html>
