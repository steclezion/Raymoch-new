<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Raymoch • Partner Programs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --brand-blue:#0A2A6B; --brand-gold:#DAA520;
      --bg:#F7F7FB; --card:#FFFFFF; --ink:#0F1222; --muted:#475569; --border:#E2E6EE;
      --shadow:0 10px 30px rgba(10,42,107,.08);
      --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;height:100%}
    body{display:flex;flex-direction:column;min-height:100vh}
    main{flex:1}
    a{color:var(--brand-blue);text-decoration:none}
    .container{max-width:1160px;margin:0 auto;padding:24px}

    /* NAV */
    .site-header{position:sticky;top:0;z-index:1000;background:#fff;border-bottom:1px solid var(--border)}
    .nav{display:flex;align-items:center;gap:16px;justify-content:space-between;padding:12px 16px;color:var(--brand-blue)}
    .brand{display:flex;gap:10px;align-items:center}
    .brand .dot{width:12px;height:12px;border-radius:50%;background:var(--brand-gold)}
    .brand h1{font-size:18px;margin:0;font-weight:800;color:var(--brand-blue)}
    .menu{display:flex;gap:18px;font-weight:700;flex:1;align-items:center}
    .menu a{opacity:.9;color:var(--brand-blue)}
    .menu a:hover,.menu a.active{opacity:1}
    .menu a.active{position:relative}
    .menu a.active::after{content:"";position:absolute;left:0;right:0;bottom:-6px;height:2px;background:var(--brand-gold)}
    .nav-search{margin-left:auto;display:flex;gap:8px;align-items:center}
    .nav-search input{border:1px solid var(--border);border-radius:12px;padding:8px 12px;min-width:260px}
    .nav-actions{display:flex;gap:10px;align-items:center}
    .btn{border:0;background:var(--brand-blue);color:#fff;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
    .btn.secondary{background:#fff;color:var(--brand-blue);border:1px solid var(--brand-blue)}

    /* HERO */
    .hero{background:var(--brand-blue);color:#fff;padding:36px 0 18px}
    .hero h2{margin:0 0 8px;font-size:40px;font-weight:900}
    .hero p{margin:0;color:#e5ecff;max-width:820px}

    /* Shared UI */
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .col-4{grid-column:span 4}
    .card{border:1px solid var(--border);border-radius:20px;background:var(--card);padding:20px;box-shadow:var(--shadow)}
    .card h3{margin:0 0 6px;font-size:18px;color:var(--brand-blue)}
    .card p{margin:6px 0 0;color:var(--muted)}
    .card.click{cursor:pointer}
    .card.click:hover{transform:translateY(-2px);box-shadow:0 14px 36px rgba(6,60,168,.12)}
    .meta{color:#6b7280;font-size:14px}
    .badge{display:inline-block;border:1px solid var(--border);border-radius:10px;padding:4px 8px;font-size:12px;margin-right:6px;background:#f9fafb}

    /* Routing */
    .route{display:none}
    .route.active{display:block}

    /* Filter bar */
    .filterbar{display:flex;gap:12px;align-items:center;margin:12px 0 14px;flex-wrap:wrap}
    .filterbar select,.filterbar input{border:1px solid var(--border);border-radius:12px;padding:8px 12px;font-size:15px}
    .filterbar input{flex:1;min-width:200px}
    .filterbar .reset{border:0;background:#fff;border:1px solid var(--border);border-radius:12px;padding:8px 14px;font-weight:700;cursor:pointer}

    /* Footer */
    footer{border-top:1px solid var(--border);padding:18px 0;color:#6b7a99;font-size:14px;background:#fff;margin-top:auto}
    footer .row{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
    footer nav a{margin-right:14px}
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container nav">
      <div class="brand"><span class="dot"></span><h1>Raymoch</h1></div>
      <nav class="menu" aria-label="Primary">
        <a href="#">Businesses</a>
        <a href="#">Insights</a>
        <a href="#/programs" id="menuServices" aria-current="page" class="active">Services</a>
        <a href="#">About</a>
        <div class="nav-search">
          <input id="navSearch" type="search" placeholder="Search programs, types, or countries" aria-label="Global search" />
        </div>
      </nav>
      <div class="nav-actions">
        <button class="btn secondary" id="loginBtn" type="button">Log in</button>
        <button class="btn" id="signupBtn" type="button">Sign up</button>
      </div>
    </div>
    <div class="hero">
      <div class="container">
        <h2>Partner Programs</h2>
        <p>Discover official programs, subsidies, and opportunities for African businesses.</p>
      </div>
    </div>
  </header>
  <main>
    <div class="container">
      <!-- STEP 1: CHOOSE PATH -->
      <section class="route active" data-route="programs" aria-labelledby="chooseTitle">
        <h3 id="chooseTitle" style="color:var(--brand-blue)">Choose a partner path</h3>
        <!-- Landing search bar (required) -->
        <div class="filterbar" id="lpFilterbar" role="search" style="margin-top:8px">
          <input id="lpQuery" type="search" placeholder="Search by name, sponsor, sector" aria-label="Search programs on landing" />
          <select id="lpCategory" aria-label="Program type (landing)"></select>
          <select id="lpCountry" aria-label="Country (landing)"></select>
          <button class="reset" id="lpSearchBtn" type="button">Search</button>
        </div>
        <div class="grid" style="margin-top:16px">
          <article class="card col-4 click" data-type="accelerator" tabindex="0" role="button" aria-label="Accelerator Partner">
            <h3>Accelerator Partner</h3>
            <p class="meta">Cohort pipelines • Verified profiles</p>
          </article>
          <article class="card col-4 click" data-type="syndicate" tabindex="0" role="button" aria-label="Syndicate Partner">
            <h3>Syndicate Partner</h3>
            <p class="meta">Dealrooms • Referral tracking</p>
          </article>
          <article class="card col-4 click" data-type="ecosystem" tabindex="0" role="button" aria-label="Ecosystem Partner">
            <h3>Ecosystem Partner</h3>
            <p class="meta">Directory sync • Member verification</p>
          </article>
        </div>
      </section>

      <!-- STEP 2: CATALOG with filters -->
      <section class="route" data-route="catalog" aria-labelledby="catalogTitle">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
          <h3 id="catalogTitle" style="color:var(--brand-blue);margin:0">Programs</h3>
          <button class="btn secondary" id="backToChoices" type="button" aria-label="Back to choices">← Back</button>
        </div>

        <div class="filterbar" role="search">
          <input id="catQuery" type="search" placeholder="Search by name, sponsor, sector" aria-label="Search catalog" />
          <select id="catCategory" aria-label="Program type"></select>
          <select id="catCountry" aria-label="Country"></select>
          <button class="reset" id="catReset" type="button">Clear</button>
        </div>

        <div class="grid" id="cards" aria-live="polite"></div>
        <div id="emptyState" style="display:none;margin:24px 0;color:#6b7280">
          No programs match your filters.
        </div>
      </section>

      <!-- STEP 3: PROGRAM DETAILS -->
      <section class="route" data-route="details" aria-labelledby="detailTitle">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
          <h3 id="detailTitle" style="color:var(--brand-blue);margin:0">Program Information</h3>
          <div>
            <button class="btn secondary" id="backToCatalog" type="button">← Back to list</button>
            <button class="btn" id="toEligibility" type="button">Check eligibility</button>
          </div>
        </div>
        <div id="progDetail" class="card"></div>
      </section>

      <!-- STEP 4: ELIGIBILITY -->
      <section class="route" data-route="eligibility" aria-labelledby="eligTitle">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
          <h3 id="eligTitle" style="color:var(--brand-blue);margin:0">Eligibility</h3>
          <button class="btn secondary" id="backToDetails" type="button">← Back to program</button>
        </div>

        <form id="eligForm" class="card" novalidate>
          <div class="grid">
            <div class="col-4" style="grid-column:span 6">
              <label>Organization Name
                <input name="org" type="text" required
                  style="padding:10px;border:1px solid var(--border);border-radius:12px;width:100%" />
              </label>

              <label>Contact Email
                <input name="email" type="email" required
                  style="padding:10px;border:1px solid var(--border);border-radius:12px;width:100%" />
              </label>

              <label>Country (AU 55)
                <select name="country" required id="eligCountry"
                  style="padding:10px;border:1px solid var(--border);border-radius:12px;width:100%"></select>
              </label>
            </div>

            <div class="col-4" style="grid-column:span 6">
              <label id="typeSpecific1"></label>
              <label id="typeSpecific2"></label>
              <label id="typeSpecific3"></label>
            </div>
          </div>

          <div style="margin-top:12px">
            <button class="btn" type="submit">Submit Application</button>
          </div>
        </form>
      </section>
    </div>
  </main>
  <footer>
    <div class="container">
      <div class="row">
        <div>© <span id="y"></span> Raymoch</div>
        <nav><a href="#">Privacy</a><a href="#">Terms</a><a href="#">Contact</a></nav>
      </div>
    </div>
  </footer>

  <script>
    // ---------- Helpers ----------
    const $  = (s)=>document.querySelector(s);
    const $$ = (s)=>Array.from(document.querySelectorAll(s));
    const cap = (s)=>s ? s.charAt(0).toUpperCase()+s.slice(1) : '';

    // Year in footer
    $('#y').textContent = new Date().getFullYear();

    // Keep Services highlighted
    $('#menuServices')?.classList.add('active');

    // ---------- Router ----------
    const routes = ['programs','catalog','details','eligibility'];
    function go(route){
      $$('.route').forEach(x=>x.classList.remove('active'));
      const target = document.querySelector(`.route[data-route="${route}"]`);
      if(target){ target.classList.add('active'); window.scrollTo({top:0, behavior:'instant'}); }
    }

    // ---------- Data ----------
    // Sample catalog (expand anytime). "category" includes Women & Youth.
    const PROGRAMS = [
      // Accelerator
      {id:'undp-youth', name:'Youth Entrepreneurship', sponsor:'UNDP', type:'accelerator', category:'Youth', sector:'Multi-sector', country:'Ethiopia', deadline:'Jul 2024', info:'UNDP-backed program fostering youth-led startups with mentorship, stipends and market linkages.'},
      {id:'green-founders', name:'Green Founders Bootcamp', sponsor:'Regional', type:'accelerator', category:'Green/Climate', sector:'Energy', country:'Kenya', deadline:'Nov 2025', info:'Bootcamp for climate-focused SMEs; includes verification fast-lane and pilot partners.'},

      // Syndicate
      {id:'diaspora-co-invest', name:'Diaspora Co-Invest Window', sponsor:'Investor Syndicate', type:'syndicate', category:'Investment/Syndicate', sector:'Multi-sector', country:'Nigeria', deadline:'Rolling', info:'Co-invest vehicle for diaspora angels; thesis-aligned dealrooms and referral attribution.'},
      {id:'afdb-export', name:'Small Business Export Support', sponsor:'African Development Bank', type:'syndicate', category:'Export Support', sector:'Manufacturing', country:'Kenya', deadline:'Mar 2026', info:'Export-readiness audits, certification support and buyer introductions.'},

      // Ecosystem
      {id:'ngr-agribiz', name:'Agribusiness Investment Grant', sponsor:'Government of Nigeria', type:'ecosystem', category:'Grant', sector:'Agriculture', country:'Nigeria', deadline:'May 2025', info:'Capital grants for agribusiness SMEs; paired with market linkages.'},
      {id:'women-tech', name:'Women in Tech Initiative', sponsor:'NGO', type:'ecosystem', category:'Women', sector:'Technology', country:'Ghana', deadline:'Sep 2024', info:'Initiative to boost women participation and leadership in African tech.'},
      {id:'sme-renew', name:'SME Renewable Energy Subsidy', sponsor:'Regional Program', type:'ecosystem', category:'Subsidy', sector:'Energy', country:'Multi-country', deadline:'Dec 2025', info:'Hardware/CapEx subsidy for SME solar adoption; fast verification path for partners.'}
    ];

    // AU 55 (with a friendly "All countries" option added at render time)
    const AU55 = [
      "Algeria","Angola","Benin","Botswana","Burkina Faso","Burundi","Cabo Verde","Cameroon",
      "Central African Republic","Chad","Comoros","Republic of the Congo","Côte d’Ivoire","Djibouti",
      "Democratic Republic of the Congo","Egypt","Equatorial Guinea","Eritrea","Eswatini",
      "Ethiopia","Gabon","Gambia","Ghana","Guinea","Guinea-Bissau","Kenya","Lesotho",
      "Liberia","Libya","Madagascar","Malawi","Mali","Mauritania","Mauritius","Morocco",
      "Mozambique","Namibia","Niger","Nigeria","Rwanda","Sahrawi Arab Democratic Republic",
      "São Tomé and Príncipe","Senegal","Seychelles","Sierra Leone","Somalia","South Africa",
      "South Sudan","Sudan","Tanzania","Togo","Tunisia","Uganda","Zambia","Zimbabwe"
    ];

    // State
    const state = { type:null, program:null };

    // ---------- Step 1: Choose path ----------
    function attachCardHandlers(){
      $$('.card.click[data-type]').forEach(card=>{
        card.addEventListener('click', ()=>{ state.type = card.dataset.type; renderCatalog(); go('catalog'); });
        card.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); state.type = card.dataset.type; renderCatalog(); go('catalog'); } });
      });
    }
    attachCardHandlers();
    // Initialize landing dropdowns and card data immediately
    ensureFiltersPopulatedOnce();
    populatePathCards();

    // ---------- Catalog / Filters ----------
    function ensureFiltersPopulatedOnce(){
      const typeEl = $('#catCategory');
      const ctryEl = $('#catCountry');
      const lpTypeEl = $('#lpCategory');
      const lpCtryEl = $('#lpCountry');

      // Build category list once (ensure Women/Youth are present)
      const computedCats = Array.from(new Set([...PROGRAMS.map(p=>p.category), 'Women','Youth']))
        .filter(Boolean).sort((a,b)=>a.localeCompare(b));
      const catOptions = ['All program types', ...computedCats]
        .map(x=>`<option>${x}</option>`).join('');

      if(typeEl && typeEl.options.length === 0){ typeEl.innerHTML = catOptions; }
      if(lpTypeEl && lpTypeEl.options.length === 0){ lpTypeEl.innerHTML = catOptions; }

      // Countries (AU55 + All)
      const countryOptions = ['All countries (55)', ...AU55]
        .map(c=>`<option>${c}</option>`).join('');
      if(ctryEl && ctryEl.options.length === 0){ ctryEl.innerHTML = countryOptions; }
      if(lpCtryEl && lpCtryEl.options.length === 0){ lpCtryEl.innerHTML = countryOptions; }
    }

    // Show sample data inside the three path cards (top 2 programs by type)
    function populatePathCards(){
      const types = ['accelerator','syndicate','ecosystem'];
      types.forEach(t=>{
        const card = document.querySelector(`.card.click[data-type="${t}"]`);
        if(!card) return;
        const items = PROGRAMS.filter(p=>p.type===t).slice(0,2);
        const count = PROGRAMS.filter(p=>p.type===t).length;
        const list = items.map(p=>`<li>${p.name} <span class="meta">• ${p.country}</span></li>`).join('');
        const badge = `<span class="badge">${count} program${count!==1?'s':''}</span>`;
        // Only append once
        if(!card.querySelector('ul')){
          const ul = document.createElement('ul');
          ul.className='meta';
          ul.style.marginTop='8px';
          ul.innerHTML = list || '<li>No programs yet</li>';
          card.appendChild(ul);
          const b = document.createElement('div');
          b.style.marginTop='8px';
          b.innerHTML = badge;
          card.appendChild(b);
        }
      });
    }

    function renderCatalog(){
      ensureFiltersPopulatedOnce();
      ensureFiltersPopulatedOnce();
      $('#catalogTitle').textContent = `${cap(state.type||'All')} Programs`;

      const q     = ($('#catQuery').value||'').trim().toLowerCase();
      const cat   = $('#catCategory').value || 'All program types';
      const ctry  = $('#catCountry').value  || 'All countries (55)';

      const cards = $('#cards');
      cards.innerHTML = '';

      const result = PROGRAMS.filter(p=>{
        const matchesPath = !state.type || p.type === state.type;
        const text = `${p.name} ${p.sponsor} ${p.category} ${p.sector} ${p.country}`.toLowerCase();
        const hitsQuery = !q || text.includes(q);
        const hitsType  = (cat === 'All program types') || p.category === cat;
        const hitsCtry  = (ctry.startsWith('All countries')) || p.country === ctry || p.country === 'Multi-country';
        return matchesPath && hitsQuery && hitsType && hitsCtry;
      });

      $('#emptyState').style.display = result.length ? 'none' : 'block';

      result.forEach(p=>{
        const el = document.createElement('article');
        el.className = 'card col-4 click';
        el.innerHTML = `
          <h3>${p.name}</h3>
          <p class="meta">${p.sponsor} • ${p.country}</p>
          <span class="badge">${p.category}</span>
          <span class="badge">${p.sector}</span>
          <span class="badge">Deadline: ${p.deadline}</span>`;
        el.addEventListener('click', ()=>{ state.program = p; renderDetails(); go('details'); });
        el.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); state.program = p; renderDetails(); go('details'); } });
        cards.appendChild(el);
      });
    }

    // Filter events (live)
    $('#catQuery').addEventListener('input', renderCatalog);
    $('#catCategory').addEventListener('change', renderCatalog);
    $('#catCountry').addEventListener('change', renderCatalog);
    $('#catReset').addEventListener('click', ()=>{
      $('#catQuery').value = '';
      $('#catCategory').selectedIndex = 0;
      $('#catCountry').selectedIndex = 0;
      renderCatalog();
    });

    // Landing search → pushes to catalog & applies filters
    $('#lpSearchBtn').addEventListener('click', ()=>{
      state.type = null; // show all paths by default
      go('catalog');
      ensureFiltersPopulatedOnce();
      $('#catQuery').value = $('#lpQuery').value || '';
      $('#catCategory').value = $('#lpCategory').value || 'All program types';
      $('#catCountry').value = $('#lpCountry').value || 'All countries (55)';
      renderCatalog();
    });
    $('#lpQuery').addEventListener('keydown', (e)=>{
      if(e.key==='Enter'){
        e.preventDefault();
        $('#lpSearchBtn').click();
      }
    });

    // Back from catalog
    $('#backToChoices').addEventListener('click', ()=>{ state.type = null; go('programs'); });

    // ---------- Details ----------
    function renderDetails(){
      if(!state.program) return;
      $('#detailTitle').textContent = state.program.name;
      $('#progDetail').innerHTML = `
        <p class="meta"><strong>Path:</strong> ${cap(state.program.type)} • <strong>Program type:</strong> ${state.program.category}</p>
        <p class="meta"><strong>Sponsor:</strong> ${state.program.sponsor} • <strong>Country:</strong> ${state.program.country} • <strong>Sector:</strong> ${state.program.sector}</p>
        <p>${state.program.info}</p>
        <p class="meta">Deadline: ${state.program.deadline}</p>
      `;
      $('#eligTitle').textContent = `Eligibility — ${state.program.name}`;
    }

    $('#backToCatalog').addEventListener('click', ()=> go('catalog'));
    $('#toEligibility').addEventListener('click', ()=>{ renderEligibility(); go('eligibility'); });

    // ---------- Eligibility ----------
    function renderEligibility(){
      // Country dropdown (AU55)
      const cSel = $('#eligCountry');
      if(cSel.options.length === 0){ cSel.innerHTML = AU55.map(c=>`<option>${c}</option>`).join(''); }

      const ts1 = $('#typeSpecific1');
      const ts2 = $('#typeSpecific2');
      const ts3 = $('#typeSpecific3');

      // Reset
      ts1.innerHTML = ts2.innerHTML = ts3.innerHTML = '';

      const t = state.program?.type || state.type || 'ecosystem';

      if(t === 'accelerator'){
        ts1.innerHTML = 'Startups per year <input name="aCount" type="number" min="0" required style="padding:10px;border:1px solid var(--border);border-radius:12px;width:100%">';
        ts2.innerHTML = 'Named program lead? <select name="aLead" required style="padding:10px;border:1px solid var(--border);border-radius:12px;width:100%"><option value="">Select</option><option>Yes</option><option>No</option></select>';
        ts3.innerHTML = 'Data-sharing consent? <select name="aConsent" required style="padding:10px;border:1px solid var(--border);border-radius:12px;width:100%"><option value="">Select</option><option>Yes</option><option>No</option></select>';
      } else if(t === 'syndicate'){
        ts1.innerHTML = 'Active members <input name="sCount" type="number" min="0" required style="padding:10px;border:1px solid var(--border);border-radius:12px;width:100%">';
        ts2.innerHTML = 'Compliance owner? <select name="sComp" required style="padding:10px;border:1px solid var(--border);border-radius:12px;width:100%"><option value="">Select</option><option>Yes</option><option>No</option></select>';
        ts3.innerHTML = 'Documented thesis? <select name="sThesis" required style="padding:10px;border:1px solid var(--border);border-radius:12px;width:100%"><option value="">Select</option><option>Yes</option><option>No</option></select>';
      } else {
        // ecosystem
        ts1.innerHTML = 'Member businesses <input name="eCount" type="number" min="0" required style="padding:10px;border:1px solid var(--border);border-radius:12px;width:100%">';
        ts2.innerHTML = 'Named coordinator? <select name="eCoord" required style="padding:10px;border:1px solid var(--border);border-radius:12px;width:100%"><option value="">Select</option><option>Yes</option><option>No</option></select>';
        ts3.innerHTML = 'Roster CSV available? <select name="eRoster" required style="padding:10px;border:1px solid var(--border);border-radius:12px;width:100%"><option value="">Select</option><option>Yes</option><option>No</option></select>';
      }
    }

    // Eligibility submit (stub)
    $('#eligForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      alert('Application submitted. We’ll follow up by email.');
      go('programs');
    });

    // Back from eligibility
    $('#backToDetails').addEventListener('click', ()=> go('details'));

    // ---------- Nav search (global) ----------
    // Pressing Enter in top search jumps to catalog and pre-filters
    $('#navSearch').addEventListener('keydown', (e)=>{
      if(e.key === 'Enter'){
        e.preventDefault();
        state.type = null; // show all paths
        go('catalog');
        // Delay a tick so inputs exist
        setTimeout(()=>{
          $('#catQuery').value = e.target.value || '';
          renderCatalog();
        }, 0);
      }
    });

    // Initial render: open catalog if hash provided
    if(location.hash.includes('/programs')){ go('programs'); }
  </script>
</body>
</html>
